<!doctype html>
<html class="no-js" lang="en">
        <head>
                <meta charset="utf-8" />
                <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                <title>CarePax</title>
                <link rel="stylesheet" href="../../../app/assets/stylesheets/application.css" />
                <script src="bower_components/modernizr/modernizr.js"></script>
        </head>
        <body>
            <div id = "welcome">
                <h1>Welcome to CarePax<h1>
            </div>
                <div id="bgMap"></div>
                <script type="text/javascript">
                    var bgMap;
                    function initMap() {
                        bgMap = new google.maps.Map(document.getElementById('bgMap'), {
                                        center: {lat: 42.35, lng: -71.108},
                                        zoom: 16
                        });
                        google.maps.event.addDomListener(window, 'load', initialize);
                        // Create the search box and link it to the UI element.
                        var input = document.getElementById('pac-input');
                        var searchBox = new google.maps.places.SearchBox(input);
                        map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

                        // Bias the SearchBox results towards current map's viewport.
                        map.addListener('bounds_changed', function() {
                            searchBox.setBounds(map.getBounds());
                        });

                        var markers = [];
                        // Listen for the event fired when the user selects a prediction and retrieve
                        // more details for that place.
                        searchBox.addListener('places_changed', function() {
                            var places = searchBox.getPlaces();

                            if (places.length == 0) {
                              return;
                            }

                            // Clear out the old markers.
                            markers.forEach(function(marker) {
                              marker.setMap(null);
                            });
                            markers = [];

                            // For each place, get the icon, name and location.
                            var bounds = new google.maps.LatLngBounds();
                            places.forEach(function(place) {
                                var icon = {
                                    url: place.icon,
                                    size: new google.maps.Size(71, 71),
                                    origin: new google.maps.Point(0, 0),
                                    anchor: new google.maps.Point(17, 34),
                                    scaledSize: new google.maps.Size(25, 25)
                                }));
                                // Create a marker for each place.
                                markers.push(new google.maps.Marker({
                                    map: map,
                                    icon: icon,
                                    title: place.name,
                                    position: place.geometry.location
                                }));

                                if (place.geometry.viewport) {
                                    // Only geocodes have viewport.
                                    bounds.union(place.geometry.viewport);
                                  } else {
                                    bounds.extend(place.geometry.location);
                                  }
                            });
                            map.fitBounds(bounds);
                        });
                    }
                </script>
                <script async defer
                         src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBK15fSJUAnCidloXH9XwR9TV73ukZsyvI&callback=initMap">
                </script>
                <script src="bower_components/jquery/dist/jquery.min.js"></script>
                <script src="bower_components/foundation/js/foundation.min.js"></script>
                <script src="js/app.js"></script>
        </body>
